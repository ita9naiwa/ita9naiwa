---
layout: article
title: "추천 시스템에서 다양성이 중요한 이유"
category: "productivity"
tag: "productivity"
comment: true
key: prod2
mathjax: true
---
#### 잡담
[회사](http://bibly.kr) 내에서 엔지니어가 아닌 사람들을 대상으로 만든 발표 자료입니다.
이 주제에 관심 있는 사람에게도 도움이 될 것 같아 공유합니다.

-----

현재 인터넷 어디에서나 추천 시스템을 찾아볼 수 있다.
인터넷에서 흔히 찾아볼 수 있는 추천 시스템의 예시는 다음과 같다.

1. 페이스북의 피드
2. 유투브의 동영상/음악 추천
3. 네이버/다음같은 포털 사이트의 뉴스/블로그 글 추천
4. 구글의 검색 엔진

추천 시스템의 정의는 다양하지만, 내가 가장 좋아하는 추천 시스템의 정의는 다음과 같다.
> _추천 시스템은 검색 엔진의 검색 결과를 의도적으로 제한하는 방법이다._
>> 적확한 인용은 아니며, 누가 이 말을 했는지 기억이 나지 않습니다...

이 정의는 추천 시스템이 존재하는 가장 큰 이유를 아름답게 요약해준다고 생각한다.

영화 대여점, 혹은 VOD 사이트에서, 수많은 영화의 타이틀을 보며 결정장애를 느낀 적은 다들 있을 것이라 생각한다.
혹은 인터넷에서 무언가를 사고자 할 때, 수많은 물건을 확인하느라, 심지어 내가 어떤 걸 맘에 들어했는지도 까먹어버린 경험도 다들 있을 것이다.
이는 Paradox of Choice라고 하는 현상이다. 추천 시스템은 이 문제를 해결하는 훌륭한 방법이다.
[The Paradox of Choice에 대한 좋은 포스트](https://blog.todoist.com/ko/2015/07/13/science-analysis-paralysis-overthinking-kills-productivity-can/)

추천 시스템이 **검색 결과를 제한함으로서** 위의 문제를 해결하지만, 이 점이 다른 문제를 불러오기도 한다.
추천 시스템은 유저의 행동 자체에 영향을 미친다.


> [machines] mediate more and more of what we do. They Guide an increasing proportion of our choices - where to eat, where to sleep, who to sleep with and what to read. From Google to Yelp to Facebook, they help shape what we know.
>
> [기계는] 점점 우리의 선택을 점점 더 많이 결정한다. 어디서 무엇을 먹는가, 어디에서 자는가, 누구랑 잠을 같이 자는가, 혹은 무엇을 읽는가까지. 구글, 옐프(식당 추천 서비스), 페이스북까지, 인터넷은 당신의 지식을 결정한다.
>
> *Eli Pariser* The Filter Bubble의 저자, TED 강연자.

추천 시스템은 **모델이** 판단하기에, _유저가 좋아할 것_ 이라 생각하는 아이템을 선택해 유저에게 전달한다.
유저가 좋아할 만한 아이템을 찾는 방법에는 여러 가지가 있지만, 그 중 가장 쉬운 방법은 유명한 아이템을 추천해주는 것이다.
유명한 아이템을 유명하게 만드는 이유는, 그 아이템이 정말로 훌륭해서, 많은 사람들이 그 아이템을 좋아할 가능성이 높기 때문이다.

추천 시스템의 평가 방법도 이를 어느 정도는 장려한다.
추천 시스템을 평가하는  일반적인 방법은, "유저가 본 아이템을 얼마나 잘 맞추는가?"에 맞추어져 있다.
Precision, Recall, MAE, Hold-out, k-fold cross validations...와 같은 대부분의 추천 시스템 평가 방식이 이러하다.
추천 시스템이 유명한 아이템을 얼마나 자주 추천하는가에 관한 문제는 고려하지 않는다.
많은 Collaborative Filtering Model의 경우, _유명한 아이템_ 은 interaction이 많아, 더 정확한 예측값을 만들 수 있다고 생각해 더 많이 추천되기도 한다.
유명한 아이템을 얼마나 추천하는가에 관한 문제는 전혀 고려하지 않고 있습니다. 즉, 추천 시스템은 유명한 아이템을 자주 추천하게 된다.


![Long-tail]({{ "/assets/images/diversity_in_recsys/long-tail.png" | absolute_url }})

이 그래프가 마케팅, 추천 시스템 업계에서 많이 사용되지만, 원래 의미는 다음과 같다고 생각한다. long-tail에도 많은 기회가 있지만, **결국 가장 많은 사람의 관심을 받으며, 가장 많이 팔리는 것은 소수의 좋은 아이템들이며, 이들이 유명해지는 것이다.**

하지만, 유명한 아이템을 추천하는 경우 추천 시스템의 존재 가치가 조금 퇴색되는 경향이 있는 것 같다. 적어도, 유저가 이미 알고 있는 아이템을 추천하는게 추천으로서의 큰 의미가 있을까?

현재 추천 시스템의 평가 방법은, "유저가 본 아이템을 얼마나 잘 맞추는가?"(Precision, Recall, MAE, Hold-out, k-fold cross validations...와 같은 대부분의 추천 시스템 평가 방식이 이러합니다.)에 맞추어져 있고, 유명한 아이템을 얼마나 추천하는가에 관한 문제는 전혀 고려하지 않고 있습니다. 즉, 추천 시스템은 유명한 아이템을 자주 추천하게 된다.

추천 시스템은 유저의 행동 자체에 영향을 미칩니다.


추천 모델은, 특정 아이템(아마 유명한)이 얼마나 자주 추천되는가에 대해서는 고려하지 않고, 심지어 추천 모델을 만드는 사람도 이에 대해 무지한 경우도 많습니다. 정확도에만 집중하는 추천 시스템은 유명한 아이템 위주의 추천을 만들고, 이 점이 만드는 문제는 다음과 같다.

Accuracy에만 집중한 추천 시스템은
1. 유저가 좋아할 만한 아이템을 골라 몇 개를 추천한다.
  - 유명한 아이템이 선택될 가능성이 높다.
    - 유명한 것 자체는 아이템의 Quality의 indicator이므로, 좋은 아이템일 가능성은 높지만.
2. User의 view history에 유명한 아이템이 더 추가된다.
3. 추천 시스템은 기본적으로 **유저의 view history** 를 기반으로 아이템을 추천한다.
4. 결국 추천 시스템은 다시 유명한 아이템을 추천하게 된다.
이 효과는 Rich-Get-Richer Effect라는 이름으로 알려져 있으며, 기업의 수익과, 유저의 만족도 양쪽 측면에서 악영향을 미친다.

![Rich-Get-Richer Effect]({{ "/assets/images/diversity_in_recsys/Rich-Get-Richer.png" | absolute_url }})

위 표는 어떤 추천 시스템을 사용하는 인터넷 쇼핑 몰의 판매량 데이터이다.
추천 시스템을 적용한 후, 유명한 아이템이 더 추천이 많이 되고, 유명한 아이템의 판매량이 증가한다. 하지만, 유명하지 않은 아이템의 경우 추천 시스템이 적용된 이후 판매량이 감소한다.



#### 다양성의 부족이 유저의 만족도를 해치는 실제 예시
많은 사례를 찾아볼 수 있지만, 실제로 경험한 일을 얘기하는게 아무래도 좋을 것 같아요.
저는 별 일이 없으면 항상 유투브 레드로 음악을 듣습니다(2년정도 된 것 같아요.)

Youtube Red는 음악 한 곡을 들으면 자동으로 다음에 들을 음악을 정하고(추천), 이를 재생합니다.
이때, 다음에 들을 음악은 현재 듣고있는 음악과 비슷한 음악입니다.

## TODO: 예시 이미지 삽입
즉, 음악 A를 들은 이후에 A와 닮은 음악 B가 재생되고, B 음악의 이후에는 B와 닮은 음악 C가 재생됩니다.
이렇게, 음악이 자동적으로 [A ,B, C, D, E, ..., K] 이어집니다.
문제점은, A, B,C, ..., K까지의 음악이 서로 모두 비슷하다는 점입니다.
몇 번의 음악 추천이 지나면(K) 다음 추천되는 음악은 K와 비슷한 A가 재생(추천)됩니다.
A의 다음에는 다시 B가 재생되고,... 이런 Loop가 생기게 됩니다. 비슷한 장르의 음악 몇가지만 듣게 되어버려용
'ㅅ'...(현재는 이 문제를 많이 개선했다고 해요.)



이 결과를 받아들인다면, 추천 시스템이 해야할 일은 다음과 같아진다.

1. 추천 시스템은 유저가 좋아할 만한(Relevant to request)한 아이템을 추천해야 한다.(추천 시스템의 전제)
2. 동시에 추천 시스템은 다양한 아이템을 추천해주어야만 한다.


-Fleder, Daniel, and Kartik Hosanagar. "Blockbuster culture's next rise or fall: The impact of recommender systems on sales diversity."

### 추천 시스템에서 사용할 수 있는 Diversity Measures.
추천 시스템에서 다양성이 중요한 이유는 위에서 설명했다. 역시, 측정할 수 없는 것은 개선할 수 없다는 명언을 받들어...
추천 시스템의 다양성을 평가할 수 있는 간단한 방버에 대해서 알아보자.


### 결론

...다음 글은 실제로 추천 시스템의 다양성을 향상시키기 위한 방법에 대해 알아보도록...;합쉬다...;;
